<!--
Beauty LP Revamp v2
- 1ãƒ•ã‚¡ã‚¤ãƒ« / GitHub Pages ç›´ç½®ãOK
- Tailwind CDN + Alpine.js
- è¦‹ç©ã‚«ãƒ¼ãƒˆ & è³¼å…¥ã‚«ãƒ¼ãƒˆï¼ˆè¤‡æ•°è¦‹ç©ã‚»ãƒƒãƒˆå¯¾å¿œ / ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ï¼‰
- ç”»åƒã‚„æ–‡è¨€ã¯ <script id="data"> ã®JSONã®ã¿ç·¨é›†
-->
<!DOCTYPE html>
<html lang="ja" x-data="app()" x-init="init()">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title x-text="data.meta.title">ç¾å®¹æ©Ÿå™¨LP</title>
  <meta name="description" :content="data.meta.description">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    :root{
      /* ã‚·ãƒƒã‚¯ã§é«˜ç´šæ„Ÿã®ã‚ã‚‹æ–°é…è‰²ï¼ˆè¦æœ›ã«åˆã‚ã›ã¦å¾®èª¿æ•´å¯ï¼‰ */
      --bg:#0a0a0f;         /* èƒŒæ™¯ã‚’ã‚ˆã‚Šæ·±ã„ãƒã‚¤ãƒ“ãƒ¼å¯„ã‚Šãƒ–ãƒ©ãƒƒã‚¯ */
      --panel:#111827;      /* ã‚«ãƒ¼ãƒ‰èƒŒæ™¯ã‚’ã‚„ã‚„æ˜ã‚‹ã */
      --ink:#e7e7ee;        /* ãƒ†ã‚­ã‚¹ãƒˆã¯é’ã¿è–„ã‚°ãƒ¬ãƒ¼ */
      --muted:#9aa1b2;      /* è£œåŠ©æ–‡å­— */
      --line:#1f2937;       /* ç½«ç·š */
      --accent:#a78bfa;     /* ãƒ¡ã‚¤ãƒ³ï¼šä¸Šå“ãªãƒã‚¤ã‚ªãƒ¬ãƒƒãƒˆ */
      --accent2:#34d399;    /* ã‚µãƒ–ï¼šè½ã¡ç€ã„ãŸã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ */
    }
    html,body{background:var(--bg); color:var(--ink)}
    .glass{backdrop-filter:saturate(140%) blur(10px); background:linear-gradient(180deg,rgba(255,255,255,.07),rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.08)}
    .shine{position:relative;overflow:hidden}
    .shine::after{content:""; position:absolute; inset:-200% -50%; background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent); transform:skewX(-20deg); animation:shine 6s linear infinite}
    @keyframes shine{0%{transform:translateX(-60%) skewX(-20deg)}100%{transform:translateX(120%) skewX(-20deg)}}
    .hero-grad{background:radial-gradient(1200px 600px at 10% -10%, rgba(167,139,250,.18), transparent 60%),radial-gradient(900px 500px at 90% 10%, rgba(52,211,153,.12), transparent 60%)}
    .divider{height:1px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent)}
    .tag{border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.06)}
    .btn{--tw-shadow:0 10px 20px -10px rgba(167,139,250,.55); box-shadow:var(--tw-shadow)}
    .blur-bottom{backdrop-filter:blur(8px)}
    .badge{min-width:1.5rem}
/* ===== Scroll/Reveal & Micro-interactions ===== */
:root { --ease: cubic-bezier(.2,.7,.2,1); }

/* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²æ—ãƒãƒ¼ */
.progress{position:fixed;top:0;left:0;height:3px;width:calc(var(--scroll,0)*1%);background:linear-gradient(90deg,var(--accent),var(--accent2));z-index:60}

/* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ï¼ˆé…å»¶ã¯ --d ã§æŒ‡å®šï¼‰ */
.reveal{opacity:0;transform:translateY(14px) scale(.98)}
.reveal.is-visible{opacity:1;transform:none;transition:transform .8s var(--ease),opacity .8s var(--ease);transition-delay:var(--d,0ms)}

/* ã‚«ãƒ¼ãƒ‰ã®ãƒ›ãƒãƒ¼ */
.card-hover{transition:transform .45s var(--ease),box-shadow .45s var(--ease)}
.card-hover:hover{transform:translateY(-6px);box-shadow:0 20px 40px -20px rgba(0,0,0,.6)}
.img-zoom{transition:transform 1.2s var(--ease)}
.card-hover:hover .img-zoom{transform:scale(1.03)}

/* ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼ */
.btn{transition:transform .2s var(--ease),box-shadow .3s var(--ease)}
.btn:hover{transform:translateY(-2px)}
.btn:active{transform:translateY(0)}

html{scroll-behavior:smooth}

/* ä½ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã®äººå‘ã‘ã«ã‚¢ãƒ‹ãƒ¡å¼±ã‚ */
@media (prefers-reduced-motion: reduce){
  .reveal,.reveal.is-visible,.card-hover,.img-zoom,.btn{transition:none!important}
}
       /* === ã“ã“ã‹ã‚‰è¿½è¨˜ ========================= */
    .tag-on-img{
      background: rgba(0,0,0,.55);
      border-color: rgba(255,255,255,.2);
      color:#fff;
      backdrop-filter: saturate(120%) blur(2px);
      -webkit-backdrop-filter: saturate(120%) blur(2px);
      text-shadow: 0 1px 1px rgba(0,0,0,.6);
    }
    .media-scrim::before{
      content:""; position:absolute; inset:0;
      background: radial-gradient(220px 120px at 1rem 1rem, rgba(0,0,0,.42), transparent 65%);
      pointer-events:none; border-radius: inherit;
    }
    /* ========================================= */
  </style>
</head>
<body class="antialiased selection:bg-purple-500/30 selection:text-white">
  <div class="progress"></div>
  <!-- ä»¥é™ãã®ã¾ã¾ -->
  <!-- ===== Sticky Header ===== -->
  <header class="fixed top-0 inset-x-0 z-40">
    <div class="mx-auto max-w-7xl px-4">
      <div class="mt-4 mb-3 glass rounded-2xl px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <img :src="data.brand.logo" alt="logo" class="w-9 h-9 rounded-xl object-cover"/>
          <span class="text-sm text-gray-300" x-text="data.brand.tagline"></span>
        </div>
        <nav class="hidden md:flex items-center gap-6 text-sm text-gray-300">
          <a href="#products" class="hover:text-white">è£½å“</a>
          <a href="#value" class="hover:text-white">é¸ã°ã‚Œã‚‹ç†ç”±</a>
          <a href="#compare" class="hover:text-white">æ¯”è¼ƒ</a>
          <a href="#ba" class="hover:text-white">Before/After</a>
          <a href="#faq" class="hover:text-white">FAQ</a>
        </nav>
        <div class="flex items-center gap-2">
          <button @click="openQuoteDrawer()" class="relative tag px-3 py-2 rounded-xl text-sm hover:bg-white/10">
            è¦‹ç©ã‚«ãƒ¼ãƒˆ
            <span class="absolute -right-2 -top-2 bg-purple-500 text-white text-xs rounded-full px-1.5 badge" x-text="quoteCount()"></span>
          </button>
          <button @click="openBuyDrawer()" class="relative tag px-3 py-2 rounded-xl text-sm hover:bg-white/10">
            è³¼å…¥ã‚«ãƒ¼ãƒˆ
            <span class="absolute -right-2 -top-2 bg-emerald-500 text-black text-xs rounded-full px-1.5 badge" x-text="buyCount()"></span>
          </button>
          <a :href="data.cta.line" class="hidden sm:inline-flex tag px-3 py-2 rounded-xl text-sm hover:bg-white/10">LINEã§ç›¸è«‡</a>
          <button @click="openLead('quote')" class="btn inline-flex items-center gap-2 bg-[var(--accent)] hover:opacity-90 text-black font-medium px-4 py-2 rounded-xl">
            è¦‹ç©ã‚‚ã‚Š
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== Hero ===== -->
<section class="pt-28 md:pt-36 pb-8 hero-grad">
  <div class="mx-auto max-w-7xl px-4 grid md:grid-cols-2 gap-10 items-center">
    <div>
      <div class="inline-flex items-center gap-2 tag px-3 py-2 rounded-xl text-xs text-gray-300 mb-4 reveal" data-reveal style="--d:40ms">
        <span>ã‚µãƒ­ãƒ³å°å…¥å°æ•° <strong x-text="data.hero.stats.units"></strong> å°çªç ´</span>
        <span class="mx-1">â€¢</span>
        <span>å¹³å‡å›å <strong x-text="data.hero.stats.roi"></strong> ãƒ¶æœˆ</span>
      </div>

      <!-- â‘  è¦‹å‡ºã— -->
<h1 class="text-4xl md:text-6xl font-extrabold leading-[1.08] tracking-tight mb-4 reveal" data-reveal style="--d:80ms">
  <span class="block">ç¾ã¯ã€æˆ¦ç•¥ã ã€‚</span>
  <span class="block text-[var(--accent)]">ãƒ—ãƒ­æ©Ÿå™¨ã‚’ã€ç¾å®Ÿçš„ãªä¾¡æ ¼ã§ã€‚</span>
</h1>
      <!-- â‘¡ ãƒªãƒ¼ãƒ‰æ–‡ -->
      <p class="reveal text-gray-300/90 text-base md:text-lg leading-relaxed max-w-xl"
         data-reveal style="--d:160ms"
         x-text="data.hero.lead"></p>

      <div class="mt-6 flex flex-wrap items-center gap-3 reveal" data-reveal style="--d:240ms">
        <button @click="openLead('quote')" class="btn bg-[var(--accent)] hover:opacity-90 text-black font-semibold px-5 py-3 rounded-2xl">ç„¡æ–™è¦‹ç©ã‚‚ã‚Š</button>
        <button @click="openLead('brochure')" class="tag px-5 py-3 rounded-2xl">è³‡æ–™è«‹æ±‚</button>
        <a :href="data.cta.tel" class="tag px-4 py-3 rounded-2xl">TEL: <span x-text="data.cta.telLabel"></span></a>
      </div>

      <div class="mt-6 flex items-center gap-4 text-xs text-gray-400 reveal" data-reveal style="--d:320ms">
        <div class="flex items-center gap-2"><span class="w-2 h-2 bg-emerald-400 rounded-full"></span>æœ€çŸ­1é€±é–“ç´å“</div>
        <div class="flex items-center gap-2"><span class="w-2 h-2 bg-[var(--accent)] rounded-full"></span>3å¹´ä¿è¨¼</div>
        <div class="flex items-center gap-2"><span class="w-2 h-2 bg-violet-300 rounded-full"></span>SNSé›†å®¢è¬›ç¿’</div>
      </div>
    </div>

    <!-- â‘¢ å³å´ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« -->
    <div class="relative reveal" data-reveal style="--d:200ms">
      <div class="aspect-[4/3] rounded-3xl overflow-hidden glass border border-white/10 shine">
        <img :src="data.hero.image" alt="hero" class="w-full h-full object-cover"/>
      </div>
      <div class="absolute -bottom-6 right-4 glass rounded-2xl px-4 py-3 flex items-center gap-3 reveal" data-reveal style="--d:360ms">
        <div class="text-sm">
          <div class="text-gray-300">æœˆé¡ã‚³ã‚¹ãƒˆç›®å®‰</div>
          <div class="text-xl font-bold" x-text="`ç´„Â¥${data.hero.monthly.toLocaleString()}~`"></div>
        </div>
        <div class="text-2xl">ğŸ’¡</div>
      </div>
    </div>
  </div>
</section>

  <!-- ===== Products ===== -->
<section id="products" class="py-16">
  <div class="mx-auto max-w-7xl px-4">
    <div class="flex items-end justify-between mb-6">
      <div>
<h2 class="text-3xl md:text-4xl font-extrabold reveal" data-reveal>è£½å“ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—</h2>
        <p class="text-gray-400 mt-2">å¿…è¦ãªã‚«ãƒ†ã‚´ãƒªã‹ã‚‰æœ€çŸ­å°å…¥ã€‚</p>
      </div>
    </div>

    <!-- ã‚¿ãƒ–ï¼šæ©Ÿå™¨ / å°‚å£²å“ -->
<div class="glass rounded-2xl p-2 inline-flex gap-2 mb-6">
  <button
    @click="productTab='æ©Ÿå™¨'; $nextTick(()=>observeReveals())"
    class="px-4 py-2 rounded-xl text-sm"
    :class="{'bg-white/15': productTab==='æ©Ÿå™¨'}"
  >æ©Ÿå™¨</button>

  <button
    @click="productTab='å°‚å£²å“'; $nextTick(()=>observeReveals())"
    class="px-4 py-2 rounded-xl text-sm"
    :class="{'bg-white/15': productTab==='å°‚å£²å“'}"
  >å°‚å£²å“</button>
</div>

    <div class="grid md:grid-cols-3 gap-6">
     <template x-for="(p,i) in filteredProducts()" :key="p.sku">
  <article class="glass rounded-3xl overflow-hidden flex flex-col card-hover reveal"
           data-reveal :style="`--d:${i*80}ms`">
<div class="relative media-scrim">
      <img :src="p.image" :alt="p.name" class="w-full aspect-[4/3] object-cover img-zoom"/>
            <div class="absolute left-4 top-4 flex gap-2">
<span class="tag tag-on-img text-xs px-2 py-1 rounded-lg" x-text="p.badge"></span>
 <span class="tag tag-on-img text-xs px-2 py-1 rounded-lg" x-show="p.stock === 'å³ç´'">å³ç´</span>
            </div>
          </div>
          <div class="p-5 flex-1 flex flex-col gap-3">
            <h3 class="text-xl font-bold" x-text="p.name"></h3>
            <p class="text-sm text-gray-300/90" x-text="p.copy"></p>

            <div class="mt-auto">
              <template x-if="p.price">
                <div>
                  <div class="text-2xl font-extrabold" x-text="`Â¥${p.price.toLocaleString()}ï¼ˆç¨è¾¼ï¼‰`"></div>
                  <div class="text-xs text-gray-400 mt-1" x-text="p.priceNote"></div>
                </div>
              </template>
              <template x-if="!p.price">
                <div class="text-sm text-gray-300 font-medium" x-text="p.priceMessage"></div>
              </template>
            </div>

            <ul class="grid grid-cols-2 gap-2 text-xs text-gray-300" x-show="p.highlights && p.highlights.length">
              <template x-for="f in p.highlights" :key="f"><li class="tag rounded-lg px-2 py-1">âœ“ <span x-text="f"></span></li></template>
            </ul>

            <div class="flex flex-wrap gap-2 mt-3">
              <button class="btn bg-[var(--accent)] hover:opacity-90 text-black font-semibold px-4 py-2 rounded-xl" @click="addQuote(p)">è¦‹ç©ã‚«ãƒ¼ãƒˆ</button>
              <button class="tag px-4 py-2 rounded-xl hover:bg-white/10" x-show="productTab==='æ©Ÿå™¨'" @click="addBuy(p)">è³¼å…¥ã‚«ãƒ¼ãƒˆ</button>
              <button class="tag px-4 py-2 rounded-xl" @click="toggle(p)">è©³ç´°</button>
            </div>
          </div>

          <div x-show="p.open" x-transition class="px-5 pb-6">
            <div class="divider my-4"></div>
            <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm">
              <template x-for="spec in p.specs" :key="spec.k">
                <div class="flex justify-between gap-4"><dt class="text-gray-400" x-text="spec.k"></dt><dd class="font-medium text-right" x-text="spec.v"></dd></div>
              </template>
            </dl>
          </div>
        </article>
      </template>
    </div>
  </div>
</section>

  <!-- ===== Value / Compare / BA / FAQ (åŒã˜) ===== -->
  <section id="value" class="py-16">
    <div class="mx-auto max-w-7xl px-4 grid md:grid-cols-3 gap-6">
      <div class="md:col-span-1 flex flex-col justify-center">
<h2 class="text-3xl md:text-4xl font-extrabold reveal" data-reveal>é¸ã°ã‚Œã‚‹ç†ç”±</h2>
        <p class="text-gray-400 mt-3">é«˜ã‚³ã‚¹ãƒ‘ã®è£å´ã‚’ã€ã™ã¹ã¦é–‹ç¤ºã€‚ä»•çµ„ã¿ã§å‹ã¤ã‹ã‚‰ã€ä¾¡æ ¼ã§ã‚‚å‹ã¦ã‚‹ã€‚</p>
      </div>
      <div class="md:col-span-2 grid sm:grid-cols-2 gap-4">
        <template x-for="v in data.value" :key="v.title">
          <div class="glass rounded-3xl p-6">
            <h3 class="font-bold text-lg mb-1" x-text="v.title"></h3>
            <p class="text-gray-300" x-text="v.desc"></p>
          </div>
        </template>
      </div>
    </div>
  </section>

  <section id="compare" class="py-16">
    <div class="mx-auto max-w-7xl px-4">
<h2 class="text-3xl md:text-4xl font-extrabold mb-6 reveal" data-reveal>ä»–ç¤¾ã¨ã®æ¯”è¼ƒ</h2>
      <div class="overflow-x-auto glass rounded-3xl">
        <table class="min-w-full text-sm">
          <thead>
            <tr class="text-left text-gray-300/90">
              <th class="p-4">è£½å“å</th>
              <th class="p-4">ä¾¡æ ¼</th>
              <th class="p-4">æ©Ÿèƒ½</th>
              <th class="p-4">ä¿è¨¼</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="row in data.compare" :key="row.name">
              <tr class="border-t border-white/10">
                <td class="p-4 font-medium" x-text="row.name"></td>
                <td class="p-4" x-text="row.price"></td>
                <td class="p-4" x-text="row.func"></td>
                <td class="p-4" x-text="row.warranty"></td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <section id="ba" class="py-16">
    <div class="mx-auto max-w-7xl px-4">
<h2 class="text-3xl md:text-4xl font-extrabold mb-6 reveal" data-reveal>Before / After</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <template x-for="item in data.beforeAfter" :key="item.before">
          <div class="glass rounded-3xl p-5">
            <div class="relative aspect-[16/9] overflow-hidden rounded-2xl">
              <img :src="item.before" alt="before" class="absolute inset-0 w-full h-full object-cover opacity-100"/>
              <img :src="item.after" alt="after" class="absolute inset-0 w-full h-full object-cover clip" :style="`clip-path: inset(0 ${100-progress}% 0 0);`"/>
              <input type="range" x-model="progress" min="0" max="100" class="absolute bottom-3 left-1/2 -translate-x-1/2 w-3/4">
            </div>
            <div class="flex justify-between text-sm text-gray-300 mt-3"><span>Before</span><span>After</span></div>
          </div>
        </template>
      </div>
    </div>
  </section>

  <section id="faq" class="py-16">
    <div class="mx-auto max-w-7xl px-4">
<h2 class="text-3xl md:text-4xl font-extrabold mb-6 reveal" data-reveal>ã‚ˆãã‚ã‚‹è³ªå•</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <template x-for="q in data.faq" :key="q.q">
          <details class="glass rounded-2xl p-5 group">
            <summary class="cursor-pointer list-none flex items-center justify-between text-lg font-bold">
              <span x-text="q.q"></span>
              <span class="text-[var(--accent)] group-open:rotate-45 transition">ï¼‹</span>
            </summary>
            <p class="text-gray-300 mt-3" x-text="q.a"></p>
          </details>
        </template>
      </div>
    </div>
  </section>

  <!-- ===== Bottom CTA ===== -->
  <div class="fixed bottom-4 inset-x-0 z-40">
    <div class="mx-auto max-w-7xl px-4">
      <div class="blur-bottom glass rounded-2xl p-3 flex items-center justify-between">
        <div class="text-sm md:text-base"><strong>ç„¡æ–™è¦‹ç©ã‚‚ã‚Š</strong>ã¾ãŸã¯<strong>è³‡æ–™è«‹æ±‚</strong>ã¯2åˆ†ã§å®Œäº†ã€‚</div>
        <div class="flex gap-2">
          <button @click="openLead('quote')" class="btn bg-[var(--accent)] hover:opacity-90 text-black font-semibold px-4 py-2 rounded-xl">è¦‹ç©ã‚‚ã‚Š</button>
          <button @click="openLead('brochure')" class="tag px-4 py-2 rounded-xl">è³‡æ–™è«‹æ±‚</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Quote Drawer (è¤‡æ•°è¦‹ç©) ===== -->
  <aside x-show="ui.quoteOpen" x-transition class="fixed inset-y-0 right-0 w-full sm:w-[480px] z-50">
    <div class="absolute inset-0 bg-black/60" @click="ui.quoteOpen=false"></div>
    <div class="relative h-full glass w-full ml-auto p-4 sm:p-6 overflow-y-auto">
      <div class="flex items-center justify-between">
        <h3 class="text-2xl font-extrabold">è¦‹ç©ã‚«ãƒ¼ãƒˆ</h3>
        <div class="flex items-center gap-2">
          <button class="tag px-3 py-2 rounded-xl" @click="addQuoteSet()">ï¼‹ è¦‹ç©ã‚»ãƒƒãƒˆ</button>
          <button class="tag px-3 py-2 rounded-xl" @click="ui.quoteOpen=false">é–‰ã˜ã‚‹</button>
        </div>
      </div>
      <div class="mt-3">
        <label class="text-sm text-gray-300">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªè¦‹ç©ã‚»ãƒƒãƒˆ</label>
        <select class="mt-1 w-full bg-white/10 border border-white/10 rounded-xl p-2" x-model.number="activeQuoteSet">
          <template x-for="(s,i) in quoteSets" :key="s.id"><option :value="i" x-text="s.name"></option></template>
        </select>
      </div>
      <template x-if="quoteSets.length">
        <div class="mt-4">
          <template x-for="(set,si) in quoteSets" :key="set.id">
            <div class="mt-4" x-show="si===activeQuoteSet">
              <div class="flex items-center justify-between">
                <h4 class="font-bold" x-text="set.name"></h4>
                <button class="text-sm text-red-300 hover:underline" @click="removeQuoteSet(si)">ã‚»ãƒƒãƒˆå‰Šé™¤</button>
              </div>
              <div class="mt-2 space-y-3" x-show="set.items.length">
                <template x-for="(item,idx) in set.items" :key="item.sku">
                  <div class="flex items-center gap-3 p-3 rounded-2xl glass">
                    <img :src="item.image" class="w-16 h-16 rounded-xl object-cover"/>
                    <div class="flex-1">
                      <div class="font-semibold" x-text="item.name"></div>
                      <div class="text-sm text-gray-400" x-text="`Â¥${item.price.toLocaleString()}`"></div>
                    </div>
                    <div class="flex items-center gap-2">
                      <input type="number" class="w-16 bg-white/10 border border-white/10 rounded-lg p-1 text-center" min="1" x-model.number="item.qty">
                      <button class="tag px-2 py-1 rounded-lg" @click="removeQuoteItem(si, idx)">å‰Šé™¤</button>
                    </div>
                  </div>
                </template>
              </div>
              <p class="text-sm text-gray-400 mt-4" x-show="!set.items.length">ã“ã®ã‚»ãƒƒãƒˆã«ã¯å•†å“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
              <div class="divider my-4"></div>
              <div class="flex items-center justify-between">
                <div class="text-sm text-gray-300">å°è¨ˆ</div>
                <div class="text-xl font-extrabold" x-text="`Â¥${quoteSubtotal(si).toLocaleString()}`"></div>
              </div>
              <div class="mt-3 grid grid-cols-2 gap-2">
                <button class="btn bg-[var(--accent)] text-black font-semibold px-4 py-3 rounded-xl" @click="sendQuote(si)">ã“ã®è¦‹ç©ã‚’é€ä¿¡</button>
              </div>
            </div>
          </template>
        </div>
      </template>
      <div class="divider my-6"></div>
      <button class="w-full tag px-4 py-3 rounded-xl" @click="sendAllQuotes()" x-show="quoteSets.some(s=>s.items.length)">å…¨è¦‹ç©ã‚’ã¾ã¨ã‚ã¦é€ä¿¡</button>
    </div>
  </aside>

  <!-- ===== Buy Drawer ===== -->
  <aside x-show="ui.buyOpen" x-transition class="fixed inset-y-0 right-0 w-full sm:w-[480px] z-50">
    <div class="absolute inset-0 bg-black/60" @click="ui.buyOpen=false"></div>
    <div class="relative h-full glass w-full ml-auto p-4 sm:p-6 overflow-y-auto">
      <div class="flex items-center justify-between">
        <h3 class="text-2xl font-extrabold">è³¼å…¥ã‚«ãƒ¼ãƒˆ</h3>
        <button class="tag px-3 py-2 rounded-xl" @click="ui.buyOpen=false">é–‰ã˜ã‚‹</button>
      </div>
      <div class="mt-4 space-y-3" x-show="buyCart.length">
        <template x-for="(item,idx) in buyCart" :key="item.sku">
          <div class="flex items-center gap-3 p-3 rounded-2xl glass">
            <img :src="item.image" class="w-16 h-16 rounded-xl object-cover"/>
            <div class="flex-1">
              <div class="font-semibold" x-text="item.name"></div>
              <div class="text-sm text-gray-400" x-text="`Â¥${item.price.toLocaleString()}`"></div>
            </div>
            <div class="flex items-center gap-2">
              <input type="number" class="w-16 bg-white/10 border border-white/10 rounded-lg p-1 text-center" min="1" x-model.number="item.qty">
              <button class="tag px-2 py-1 rounded-lg" @click="removeBuyItem(idx)">å‰Šé™¤</button>
            </div>
          </div>
        </template>
      </div>
      <p class="text-sm text-gray-400 mt-4" x-show="!buyCart.length">ã‚«ãƒ¼ãƒˆã«å•†å“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      <div class="divider my-6"></div>
      <div class="flex items-center justify-between">
        <div class="text-sm text-gray-300">å°è¨ˆ</div>
        <div class="text-xl font-extrabold" x-text="`Â¥${buySubtotal().toLocaleString()}`"></div>
      </div>
      <button class="mt-4 btn bg-emerald-400 text-black font-semibold w-full px-4 py-3 rounded-xl" @click="checkout()">è³¼å…¥æ‰‹ç¶šãã¸</button>
    </div>
  </aside>

  <!-- ===== Lead Modal (æ—¢å­˜) ===== -->
  <div x-show="modal.open" x-transition class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/70" @click="modal.open=false"></div>
    <div class="relative w-full max-w-xl glass rounded-3xl p-6">
      <h3 class="text-2xl font-extrabold mb-2" x-text="modal.title"></h3>
      <p class="text-gray-300 mb-4" x-text="modal.desc"></p>
      <form @submit.prevent="submitLead">
        <div class="grid md:grid-cols-2 gap-4">
          <label class="text-sm">ã‚µãƒ­ãƒ³å<input type="text" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" x-model="form.salon" required></label>
          <label class="text-sm">ã”æ‹…å½“è€…å<input type="text" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" x-model="form.name" required></label>
          <label class="text-sm md:col-span-2">ãƒ¡ãƒ¼ãƒ«<input type="email" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" x-model="form.email" required></label>
          <label class="text-sm md:col-span-2">é›»è©±ç•ªå·<input type="tel" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" x-model="form.tel"></label>
          <label class="text-sm md:col-span-2" x-show="modal.type==='quote'">ã”å¸Œæœ›ã®æ©Ÿå™¨<input type="text" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" x-model="form.product" placeholder="ä¾‹ï¼šphotomedicell"></label>
          <label class="text-sm md:col-span-2">å‚™è€ƒ<textarea class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3" rows="4" x-model="form.note"></textarea></label>
        </div>
        <div class="mt-4 flex items-center justify-between">
          <div class="text-xs text-gray-400">é€ä¿¡ã§ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚</div>
          <button class="btn bg-[var(--accent)] hover:opacity-90 text-black font-semibold px-6 py-3 rounded-2xl">é€ä¿¡</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Checkout Modal ===== -->
  <div x-show="ui.checkoutOpen" x-transition class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/70" @click="ui.checkoutOpen=false"></div>
    <div class="relative w-full max-w-xl glass rounded-3xl p-6">
      <h3 class="text-2xl font-extrabold mb-4">è³¼å…¥æ‰‹ç¶šã</h3>
      <form @submit.prevent="submitOrder">
        <div class="grid md:grid-cols-2 gap-4">
          <label class="text-sm">ã”æ‹…å½“è€…å<input required x-model="order.name" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3"/></label>
          <label class="text-sm">ãƒ¡ãƒ¼ãƒ«<input required type="email" x-model="order.email" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3"/></label>
          <label class="text-sm md:col-span-2">é›»è©±ç•ªå·<input x-model="order.tel" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3"/></label>
          <label class="text-sm md:col-span-2">é…é€å…ˆä½æ‰€<textarea required x-model="order.address" rows="3"
  class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3"></textarea></label>
          <label class="text-sm md:col-span-2">å‚™è€ƒ<textarea x-model="order.note" rows="3" class="w-full mt-1 rounded-xl bg-white/10 border border-white/10 p-3"></textarea></label>
        </div>
        <div class="mt-4 flex items-center justify-between">
          <div class="text-sm text-gray-300">åˆè¨ˆ <span class="font-extrabold" x-text="`Â¥${buySubtotal().toLocaleString()}`"></span></div>
          <button class="btn bg-emerald-400 text-black font-semibold px-6 py-3 rounded-2xl">æ³¨æ–‡ã‚’é€ä¿¡</button>
        </div>
      </form>
      <p class="text-xs text-gray-400 mt-3">â€» æ±ºæ¸ˆã¯è«‹æ±‚æ›¸/éŠ€è¡ŒæŒ¯è¾¼ã‚’æƒ³å®šã€‚Stripeã‚„Squareã¸ã®åˆ‡æ›¿ã‚‚å¯ï¼ˆå¾Œã§å°å…¥å¯èƒ½ãªä½œã‚Šï¼‰ã€‚</p>
    </div>
  </div>

  <!-- ===== Footer ===== -->
  <footer class="pt-20 pb-10">
    <div class="mx-auto max-w-7xl px-4 text-sm text-gray-400">
      <div class="divider mb-6"></div>
      <div class="flex flex-wrap gap-3 items-center justify-between">
        <div class="flex items-center gap-3">
          <img :src="data.brand.logo" alt="logo" class="w-8 h-8 rounded-xl object-cover"/>
          <span>Â© <span x-text="new Date().getFullYear()"></span> <span x-text="data.brand.name"></span></span>
        </div>
        <div class="flex gap-4">
          <a href="#" class="hover:text-white">ç‰¹å•†æ³•</a>
          <a href="#" class="hover:text-white">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- ===== Data & App Logic ===== -->
  <script id="data" type="application/json">
  {
    "meta": {
      "title": "ç¾ã¯ã€æˆ¦ç•¥ã ã€‚ï½œãƒ—ãƒ­æ©Ÿå™¨ã‚’ç¾å®Ÿçš„ãªä¾¡æ ¼ã§",
      "description": "photomedicell ã»ã‹ç¾å®¹æ©Ÿå™¨ã®ç›´è²©ã‚µã‚¤ãƒˆã€‚æœ€çŸ­1é€±é–“ã€3å¹´ä¿è¨¼ã€SNSé›†å®¢è¬›ç¿’ã¤ãã€‚ä¾¡æ ¼ãƒ»æ€§èƒ½ãƒ»ã‚µãƒãƒ¼ãƒˆã®3æ‹å­ã€‚"
    },
    "brand": {
      "name": "NOI BEAUTY",
      "logo": "https://images.unsplash.com/photo-1545235617-9465d2a55698?q=80&w=300&auto=format&fit=crop",
      "tagline": "ã‚µãƒ­ãƒ³DXã§ã€å‹ã¦ã‚‹ç¾å®¹çµŒå–¶ã€‚"
    },
    "cta": {
      "line": "https://line.me/ja/",
      "tel": "tel:070-3965-5563",
      "telLabel": "070-3965-5563",
      "quoteEmail": "info@example.com",
      "orderEmail": "order@example.com"
    },
    "hero": {
      "lead": "å°å…¥ã‹ã‚‰é›†å®¢ãƒ»é‹ç”¨ã¾ã§ã‚’æ¨™æº–ã‚µãƒãƒ¼ãƒˆã€‚ã€æœ€çŸ­å›åã€ã‚’è¨­è¨ˆã—ãŸãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã™ã€‚",
      "image": "https://images.unsplash.com/photo-1596461404969-9ae70b7b0cd5?q=80&w=1600&auto=format&fit=crop",
      "monthly": 40000,
      "stats": {"units": "300+", "roi": 6}
    },
    "socialProof": [
      "https://dummyimage.com/200x60/ffffff/000000.png&text=Salon+A",
      "https://dummyimage.com/200x60/ffffff/000000.png&text=Salon+B",
      "https://dummyimage.com/200x60/ffffff/000000.png&text=Salon+C",
      "https://dummyimage.com/200x60/ffffff/000000.png&text=Salon+D",
      "https://dummyimage.com/200x60/ffffff/000000.png&text=Salon+E"
    ],
   "products": [
  {
    "type":"æ©Ÿå™¨",
    "sku":"PM-001",
    "name":"Photomedicell",
    "copy":"ã€œå¤šãã®è¦æœ›ã«ç­”ãˆã‚‰ã‚Œã‚‹é©å‘½è„±æ¯›å™¨ã€œ",
    "badge":"ãƒ™ã‚¹ãƒˆã‚»ãƒ©ãƒ¼",
    "price":2800000,
    "priceNote":"â€» åˆ†å‰²ãƒ»ãƒªãƒ¼ã‚¹å¯",
    "stock":"å³ç´",
    "image":"https://images.unsplash.com/photo-1599050751795-5cdaaa1ffc51?q=80&w=1200&auto=format&fit=crop",
    "highlights":["SHR/OPT + RF","3,000Wé«˜å‡ºåŠ›","å¤§å‹ãƒãƒ©ãƒ¼æ­è¼‰","3å¹´ä¿è¨¼"],
    "specs":[
      {"k":"æ­è¼‰è„±æ¯›æ–¹å¼","v":"SHR / IPLï¼ˆOPTï¼‰ + RF / E-light"},
      {"k":"ãƒ‘ãƒ¯ãƒ¼","v":"10ã€œ50J/cmÂ²"},
      {"k":"æ³¢é•·","v":"430/530/590/640/690nm ä»–"},
      {"k":"æœ€å¤§å‡ºåŠ›","v":"3,000W"},
      {"k":"ç…§å°„é¢ç©","v":"10Ã—50mm / 15Ã—50mm"},
      {"k":"å‘¨æ³¢æ•°","v":"1ã€œ10Hz èª¿ç¯€å¯"},
      {"k":"é‡é‡","v":"28kg"}
    ],
    "open":false
  },
  {
    "type":"æ©Ÿå™¨",
    "sku":"CL-001",
    "name":"Celllook",
    "copy":"ã€œåŠ¹æœã®å¯è¦–åŒ–ã¨é¡§å®¢æº€è¶³åº¦MAXã¸ã€œ",
    "badge":"äººæ°—",
    "price":2100000,
    "priceNote":"â€» åˆ†å‰²ãƒ»ãƒªãƒ¼ã‚¹å¯",
    "stock":"å³ç´",
    "image":"https://images.unsplash.com/photo-1580584128409-012d1e761a7b?q=80&w=1200&auto=format&fit=crop",
    "highlights":["åŠ¹æœå¯è¦–åŒ–","é¡§å®¢æº€è¶³åº¦UP","ç›´æ„ŸUI"],
    "specs":[
      {"k":"ãƒ¢ãƒ¼ãƒ‰","v":"ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ« / ã‚¹ã‚­ãƒ³è§£æ"},
      {"k":"é‡é‡","v":"20kg"}
    ],
    "open":false
  },
  {
    "type":"æ©Ÿå™¨",
    "sku":"DM-A",
    "name":"æ©Ÿå™¨ï¼ˆä»®ï¼‰A",
    "copy":"COMING SOON",
    "badge":"COMING SOON",
    "price":1500000,
    "priceNote":"â€» ä¾¡æ ¼ã¯ä»®",
    "stock":"å–å¯„",
    "image":"https://images.unsplash.com/photo-1556228578-97c28c7b6757?q=80&w=1200&auto=format&fit=crop",
    "highlights":["ä½æ¶ˆè²»é›»åŠ›","ç°¡å˜ãƒ¡ãƒ³ãƒ†"],
    "specs":[{"k":"æ–¹å¼","v":"IPL"}],
    "open":false
  },
  {
    "type":"æ©Ÿå™¨",
    "sku":"DM-B",
    "name":"æ©Ÿå™¨ï¼ˆä»®ï¼‰B",
    "copy":"COMING SOON",
    "badge":"COMING SOON",
    "price":1200000,
    "priceNote":"â€» ä¾¡æ ¼ã¯ä»®",
    "stock":"å–å¯„",
    "image":"https://images.unsplash.com/photo-1601333144085-0c0b13f8b4bc?q=80&w=1200&auto=format&fit=crop",
    "highlights":["è»½é‡","é™éŸ³"],
    "specs":[{"k":"æ–¹å¼","v":"IPL"}],
    "open":false
  },
  {
    "type":"æ©Ÿå™¨",
    "sku":"DM-C",
    "name":"æ©Ÿå™¨ï¼ˆä»®ï¼‰C",
    "copy":"COMING SOON",
    "badge":"COMING SOON",
    "price":900000,
    "priceNote":"â€» ä¾¡æ ¼ã¯ä»®",
    "stock":"å–å¯„",
    "image":"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?q=80&w=1200&auto=format&fit=crop",
    "highlights":["ãƒ™ãƒ¼ã‚·ãƒƒã‚¯"],
    "specs":[{"k":"æ–¹å¼","v":"IPL"}],
    "open":false
  },

  {
    "type":"å°‚å£²å“",
    "sku":"EX-GP",
    "name":"ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ”ãƒ¼ãƒªãƒ³ã‚°",
    "copy":"ã€œçµæœé‡è¦–ã§ç¾å®ŸãŒç†æƒ³ã‚’è¶Šãˆã‚‹ã€œ",
    "badge":"å°‚å£²å“",
    "price":null,
    "priceMessage":"ãƒ­ãƒƒãƒˆè²©å£²ã«ã¤ããŠå•ã„åˆã‚ã›ãã ã•ã„",
    "stock":"å³ç´",
    "image":"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?q=80&w=1200&auto=format&fit=crop",
    "highlights":["æ¥­å‹™ç”¨","é«˜æº€è¶³åº¦"],
    "specs":[],
    "open":false
  },
  {
    "type":"å°‚å£²å“",
    "sku":"EX-IVM",
    "name":"IN VITI MIST",
    "copy":"ã€œè‚Œã‚’å®ˆã‚‹6ã¤ã®ç„¡æ·»åŠ ã€œ",
    "badge":"å°‚å£²å“",
    "price":null,
    "priceMessage":"ãƒ­ãƒƒãƒˆè²©å£²ã«ã¤ããŠå•ã„åˆã‚ã›ãã ã•ã„",
    "stock":"å³ç´",
    "image":"https://images.unsplash.com/photo-1545237017-3a3fc540cd0a?q=80&w=1200&auto=format&fit=crop",
    "highlights":["ç„¡æ·»åŠ ","ãƒŸã‚¹ãƒˆ"],
    "specs":[],
    "open":false
  },
  {
    "type":"å°‚å£²å“",
    "sku":"EX-UVS",
    "name":"VITI UV SERUM",
    "copy":"ã€œä¸–ç•Œæœ€é«˜æ°´æº–UVã‚«ãƒƒãƒˆå€¤ã€œ",
    "badge":"å°‚å£²å“",
    "price":null,
    "priceMessage":"ãƒ­ãƒƒãƒˆè²©å£²ã«ã¤ããŠå•ã„åˆã‚ã›ãã ã•ã„",
    "stock":"å³ç´",
    "image":"https://images.unsplash.com/photo-1585238342028-4bbc2a4e13d8?q=80&w=1200&auto=format&fit=crop",
    "highlights":["é«˜UVã‚«ãƒƒãƒˆ"],
    "specs":[],
    "open":false
  }
],
    "value": [
      {"title":"å·¥å ´ææºÃ—ç›´è²©","desc":"ä¸­é–“ãƒãƒ¼ã‚¸ãƒ³ã‚’å‰Šæ¸›ã—ã€å“è³ªã¯ãã®ã¾ã¾ã«ä¾¡æ ¼ã‚’æœ€é©åŒ–ã€‚åˆ©ç›Šã§ã¯ãªãä¾¡å€¤ã§å‹ã¤ã€‚"},
      {"title":"ã‚¢ãƒ•ã‚¿ãƒ¼ã‚±ã‚¢ã¾ã§ä¼´èµ°","desc":"æ©Ÿå™¨ç´å…¥ã ã‘ã§çµ‚ã‚ã‚‰ãªã„ã€‚SNSè¬›ç¿’ãƒ»HPä½œæˆãƒ»CRMå°å…¥ã¾ã§ä¸€æ°—é€šè²«ã‚µãƒãƒ¼ãƒˆã€‚"},
      {"title":"ãªã«ã«ã—ã‚ˆãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼","desc":"ãªã«ã«ã—ã‚ˆãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼"},
      {"title":"ãªã«ã«ã—ã‚ˆãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼","desc":"ãªã«ã«ã—ã‚ˆãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼"}
    ],
    "compare": [
      {"name":"å½“ç¤¾è£½å“","price":"180ã€œ280ä¸‡å††","func":"è„±æ¯›/ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«","warranty":"3å¹´"},
      {"name":"ä»–ç¤¾A","price":"350ã€œ400ä¸‡å††","func":"è„±æ¯›ã®ã¿","warranty":"1å¹´"},
      {"name":"ä»–ç¤¾B","price":"350ä¸‡å††","func":"ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«ã®ã¿","warranty":"1å¹´"}
    ],
    "beforeAfter": [
      {"before":"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?q=80&w=1600&auto=format&fit=crop","after":"https://images.unsplash.com/photo-1545235617-9465d2a55698?q=80&w=1600&auto=format&fit=crop"}
    ],
    "faq": [
      {"q":"ãƒ­ãƒ¼ãƒ³å¯©æŸ»ã¯å³ã—ã„ã§ã™ã‹ï¼Ÿ","a":"å€‹äººäº‹æ¥­ä¸»æ§˜ã§ã‚‚å¤šãé€šéã•ã‚Œã¦ã„ã¾ã™ã€‚é‡‘èæ©Ÿé–¢ã‚„å¯©æŸ»ä¼šç¤¾ã®ã”ç´¹ä»‹ã‚‚å¯èƒ½ã§ã™ã€‚"},
      {"q":"ç´æœŸã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ","a":"åœ¨åº«ãŒã‚ã‚‹ãƒ¢ãƒ‡ãƒ«ã¯æœ€çŸ­1é€±é–“ã€‚å–å¯„ã›ã¯2ã€œ3é€±é–“ãŒç›®å®‰ã§ã™ã€‚"},
      {"q":"ä¿è¨¼å†…å®¹ã¯ï¼Ÿ","a":"3å¹´é–“ã®ç„¡å„Ÿä¿®ç†ã«åŠ ãˆã€ãƒ€ã‚¦ãƒ³æ™‚ã®ä»£æ›¿æ©Ÿã‚’ã”ç”¨æ„ã—ã¾ã™ã€‚"},
      {"q":"å°å…¥å¾Œã®é›†å®¢æ”¯æ´ã¯ï¼Ÿ","a":"SNSè¬›ç¿’ã€HPä½œæˆã€é‹ç”¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€CRMå°å…¥ã¾ã§ä¸€è²«ã—ã¦æ”¯æ´ã—ã¾ã™ã€‚"}
    ]
  }
  </script>

  <script>
function app(){
  return {
    // ---- state ----
    data:{}, products:[], progress:50, productTab:'æ©Ÿå™¨',
    ui:{quoteOpen:false, buyOpen:false, checkoutOpen:false},
    modal:{open:false, type:'quote', title:'', desc:''},
    form:{salon:'', name:'', email:'', tel:'', note:'', product:''},
    quoteSets:[], activeQuoteSet:0, buyCart:[],
    order:{name:'', email:'', tel:'', address:'', note:''},

    // ---- helpers ----
    observeReveals(){
      const els = document.querySelectorAll('[data-reveal]');
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.classList.add('is-visible');
            io.unobserve(e.target);
          }
        });
      }, { threshold: 0.15, rootMargin: "0px 0px -5% 0px" });
      els.forEach(el => io.observe(el));
    },
    onScroll(){
      const h=document.documentElement;
      const scrolled=(h.scrollTop)/(h.scrollHeight-h.clientHeight)*100||0;
      document.documentElement.style.setProperty('--scroll', scrolled.toFixed(2));
    },

    // ---- lifecycle ----
    init(){
      try{ this.data = JSON.parse(document.getElementById('data').textContent) }catch(e){ console.error(e) }
      this.products = this.data.products

      // restore
      const qs = localStorage.getItem('quoteSets');
      const bc = localStorage.getItem('buyCart');
      this.quoteSets = qs ? JSON.parse(qs) : [{id: crypto.randomUUID(), name:'è¦‹ç©A', items:[] }];
      this.buyCart   = bc ? JSON.parse(bc) : [];
      this.activeQuoteSet = 0;

      this.$nextTick(()=>{
        this.observeReveals();
        this.onScroll();
        window.addEventListener('scroll', this.onScroll.bind(this), { passive:true });
      });

      // å†æç”»æ™‚ã«ã‚¢ãƒ‹ãƒ¡ç›£è¦–ã‚’å¼µã‚Šç›´ã™
      this.$watch('productTab', () => this.$nextTick(() => this.observeReveals()));
      this.$watch('products',  () => this.$nextTick(() => this.observeReveals()));
    },
    persist(){
      localStorage.setItem('quoteSets', JSON.stringify(this.quoteSets));
      localStorage.setItem('buyCart', JSON.stringify(this.buyCart));
    },

    // ---- view actions ----
    sortBy(t){
      if(t==='priceUp'){ this.products=[...this.products].sort((a,b)=>(a.price??0)-(b.price??0)) }
      else if(t==='priceDown'){ this.products=[...this.products].sort((a,b)=>(b.price??0)-(a.price??0)) }
      this.$nextTick(()=> this.observeReveals());
    },
    filteredProducts(){ return this.products.filter(p => p.type === this.productTab) },
    toggle(p){ p.open = !p.open },

    // ---- quote cart ----
    openQuoteDrawer(){ this.ui.quoteOpen = true },
    addQuoteSet(){
      this.quoteSets.push({id:crypto.randomUUID(), name:`è¦‹ç©${String.fromCharCode(65+this.quoteSets.length)}`, items:[]});
      this.activeQuoteSet = this.quoteSets.length - 1;
      this.persist();
    },
    removeQuoteSet(i){
      this.quoteSets.splice(i,1);
      if(this.activeQuoteSet>=this.quoteSets.length) this.activeQuoteSet=0;
      if(!this.quoteSets.length) this.addQuoteSet();
      this.persist();
    },
    addQuote(p){
      const set=this.quoteSets[this.activeQuoteSet];
      const exist=set.items.find(it=>it.sku===p.sku);
      if(exist){ exist.qty=(exist.qty||1)+1 } else { set.items.push({...p, qty:1}) }
      this.persist();
      alert('è¦‹ç©ã‚‚ã‚Šã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼');
    },
    removeQuoteItem(si, idx){ this.quoteSets[si].items.splice(idx,1); this.persist() },
    quoteSubtotal(si){ return this.quoteSets[si].items.reduce((s,it)=>s+((it.price??0)*(it.qty||1)),0) },
    quoteCount(){ return this.quoteSets.reduce((n,s)=>n+s.items.reduce((m,it)=>m+(it.qty||1),0),0) },

    // ---- buy cart ----
    openBuyDrawer(){ this.ui.buyOpen=true },
    addBuy(p){
      const ex=this.buyCart.find(it=>it.sku===p.sku);
      if(ex){ ex.qty=(ex.qty||1)+1 } else { this.buyCart.push({...p, qty:1}) }
      this.persist(); this.ui.buyOpen=true
    },
    removeBuyItem(i){ this.buyCart.splice(i,1); this.persist() },
    buySubtotal(){ return this.buyCart.reduce((s,it)=>s+((it.price??0)*(it.qty||1)),0) },
    buyCount(){ return this.buyCart.reduce((n,it)=>n+(it.qty||1),0) },

    // ---- lead & order ----
    openLead(type, product){
      this.modal.type=type; this.modal.open=true;
      this.form={salon:'', name:'', email:'', tel:'', note:'', product:product||''};
      this.modal.title= type==='quote'? 'ç„¡æ–™è¦‹ç©ã‚‚ã‚Š':'è³‡æ–™è«‹æ±‚';
      this.modal.desc=  type==='quote'? '2åˆ†ã§å®Œäº†ã€‚æ‹…å½“è€…ã‹ã‚‰æœ€çŸ­å½“æ—¥ä¸­ã«ã”é€£çµ¡ã—ã¾ã™ã€‚':'æœ€æ–°ã‚«ã‚¿ãƒ­ã‚°ã‚’ãƒ¡ãƒ¼ãƒ«ã§ãŠé€ã‚Šã—ã¾ã™ã€‚';
    },
    submitLead(){
      const payload={...this.form, type:this.modal.type, ts:new Date().toISOString()};
      const mailto=`mailto:${encodeURIComponent(this.data.cta.quoteEmail)}?subject=${encodeURIComponent('LPãŠå•ã„åˆã‚ã›('+this.modal.type+')')}&body=${encodeURIComponent(JSON.stringify(payload,null,2))}`;
      window.location.href=mailto; this.modal.open=false;
      alert('é€ä¿¡ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚ãƒ¡ãƒ¼ãƒ«ã‚½ãƒ•ãƒˆãŒé–‹ã‹ãªã„å ´åˆã¯ãƒ¡ãƒ¼ãƒ«ã§ã”é€£çµ¡ãã ã•ã„ã€‚');
    },
    sendQuote(si){
      const set=this.quoteSets[si];
      const body={
        type:'quote',
        setName:set.name,
        items:set.items.map(i=>({sku:i.sku,name:i.name,price:i.price,qty:i.qty})),
        subtotal:this.quoteSubtotal(si),
        ts:new Date().toISOString()
      };
      const mailto=`mailto:${encodeURIComponent(this.data.cta.quoteEmail)}?subject=${encodeURIComponent('è¦‹ç©ä¾é ¼ '+set.name)}&body=${encodeURIComponent(JSON.stringify(body,null,2))}`;
      window.location.href=mailto;
    },
    sendAllQuotes(){
      const payload={
        sets:this.quoteSets.map((s,i)=>({
          name:s.name,
          items:s.items.map(it=>({sku:it.sku,name:it.name,price:it.price,qty:it.qty})),
          subtotal:this.quoteSubtotal(i)
        })),
        ts:new Date().toISOString()
      };
      const mailto=`mailto:${encodeURIComponent(this.data.cta.quoteEmail)}?subject=${encodeURIComponent('è¦‹ç©ä¾é ¼(è¤‡æ•°)')}&body=${encodeURIComponent(JSON.stringify(payload,null,2))}`;
      window.location.href=mailto;
    },
    checkout(){ if(!this.buyCart.length) return alert('ã‚«ãƒ¼ãƒˆãŒç©ºã§ã™'); this.ui.checkoutOpen=true },
    submitOrder(){
      const order={
        customer:this.order,
        items:this.buyCart.map(i=>({sku:i.sku,name:i.name,price:i.price,qty:i.qty})),
        total:this.buySubtotal(),
        ts:new Date().toISOString()
      };
      const mailto=`mailto:${encodeURIComponent(this.data.cta.orderEmail)}?subject=${encodeURIComponent('æ³¨æ–‡ä¾é ¼')}&body=${encodeURIComponent(JSON.stringify(order,null,2))}`;
      window.location.href=mailto; this.ui.checkoutOpen=false;
    }
  }
}
  </script>
</body>
</html>
