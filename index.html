<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WAVER 3 | DEAD OR ALIVE</title>
  <meta name="description" content="WAVER 3 ティザーサイト。黒背景、ロゴ画像挿入、イントロ→フェードアウト、弾痕演出、火の粉（embers）＆スモーク、NEWS→STORY→CAST→STAFF→GALLERY→WAVER2音声。" />
  <style>
    :root{ --accent:#e50914; --ink:#e5e7eb; --line:#23232b; }
    html,body{margin:0;padding:0;background:#000;color:#fff;font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Yu Gothic"}
    img{max-width:100%;height:auto;display:block}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}
  .main-logo {
      width: min(80vw, 520px);
      margin: 0 auto 40px;
      display: block;
      filter: drop-shadow(0 10px 30px rgba(0,0,0,.6));
    }
    /* ===== Intro ===== */
    .intro{position:fixed;inset:0;background:#000;display:grid;place-items:center;z-index:9999}
    .intro__logo{width:min(92vw,1100px);opacity:0;transform:translateY(20px) scale(.96);filter:drop-shadow(0 10px 30px rgba(0,0,0,.6));animation:introIn 1600ms ease forwards 200ms}
    @keyframes introIn{to{opacity:1;transform:translateY(0) scale(1)}}
    .intro.is-hide{opacity:0;transition:opacity 1200ms ease}
    .intro.is-gone{display:none}
    .intro__logo-wrap{position:relative;display:inline-block;line-height:0;filter:drop-shadow(0 10px 30px rgba(0,0,0,.6))}
    .intro .bh{position:absolute;width:24px;height:24px;pointer-events:none;opacity:0;transform:scale(.4) rotate(0deg);z-index:10;
      background:
        radial-gradient(circle at 50% 50%, rgba(255,255,255,.22) 0%, rgba(255,255,255,.08) 22%, rgba(0,0,0,0) 38%),
        radial-gradient(circle at 50% 50%, rgba(0,0,0,.95) 16%, rgba(0,0,0,.85) 26%, rgba(90,90,90,.18) 40%, rgba(0,0,0,0) 60%),
        radial-gradient(circle at 60% 60%, rgba(255,40,20,.28), transparent 30%);
      border-radius:50%;box-shadow:inset 0 0 6px rgba(0,0,0,.9),0 0 0 1px rgba(255,255,255,.05);animation:bh-in 420ms cubic-bezier(.2,.7,.2,1) forwards}
    @keyframes bh-in{to{opacity:1;transform:scale(1) rotate(var(--rot,0deg))}}
    .intro .bh-smoke{position:absolute;width:140px;height:140px;pointer-events:none;z-index:9;background:radial-gradient(ellipse at 40% 60%, rgba(255,255,255,.10), transparent 60%);filter:blur(5px);opacity:0;transform:translate(-50%,-50%);animation:smoke 1200ms ease forwards}
    @keyframes smoke{20%{opacity:.4}100%{opacity:0;transform:translate(-50%,-50%) scale(1.3)}}

    /* ===== Global vibe ===== */
    body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:1;opacity:.22;
      background:radial-gradient(1200px 600px at 50% 40%, rgba(255,255,255,.05), transparent 60%),
                 radial-gradient(1000px 500px at 50% 130%, rgba(229,9,20,.08), transparent 60%);
      mix-blend-mode:screen}
    body::after{content:"";position:fixed;inset:0;pointer-events:none;z-index:1;background:radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,.75))}

    /* ===== Header ===== */
    .site-header{position:relative;min-height:100svh;display:grid;place-items:center;background:#000}
    .site-header__inner{position:relative;z-index:2;text-align:center}
    .subtitle{font-size:clamp(14px,2.2vw,22px);color:var(--ink);letter-spacing:.35em;margin-top:6px}

    /* ===== GNav ===== */
    .gnav{position:fixed;top:0;left:0;right:0;z-index:50;backdrop-filter:saturate(140%) blur(8px);background:rgba(8,8,12,.45);border-bottom:1px solid rgba(255,255,255,.08)}
    .gmenu{display:flex;gap:18px;align-items:center;justify-content:center;padding:14px 16px;flex-wrap:wrap}
    .gmenu a{font-weight:700;font-size:14px;letter-spacing:.12em;opacity:.9;padding:8px 10px;border-radius:999px}
    .gmenu a:hover,.gmenu a:focus{background:rgba(255,255,255,.08)}
    .gmenu .brand{margin-right:auto;font-weight:900;letter-spacing:.18em}

    /* ===== Sections ===== */
    section{position:relative;z-index:2;padding:72px 0;border-top:1px solid var(--line);background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0))}
    section:nth-of-type(even){background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,0))}
    .sec__hd{display:flex;align-items:center;gap:14px;margin:0 0 26px}
    .sec__hd .bar{width:28px;height:2px;background:var(--accent)}
    .sec__title{font-size:clamp(18px,2.6vw,24px);letter-spacing:.18em}
    .lead{color:var(--ink);line-height:1.9}

    /* ===== News/Story/Cast… ===== */
    .news{display:grid;gap:14px}
    .news li{list-style:none;border:1px solid var(--line);background:rgba(255,255,255,.02);border-radius:12px;padding:16px;display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:center}
    .news time{font-weight:700;letter-spacing:.1em;opacity:.9}
    .story{display:grid;gap:22px}
    .story .kv{border-radius:14px;overflow:hidden;border:1px solid var(--line)}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{border:1px solid var(--line);background:rgba(255,255,255,.02);border-radius:14px;overflow:hidden}
    .card .ph{aspect-ratio:16/9;background:#0d0d14;display:grid;place-items:center}
    .card .bd{padding:12px 14px}
    .meta{font-size:12px;letter-spacing:.18em;color:var(--ink)}

    /* Staff */
    .credit{list-style:none;margin:0;padding:0;display:grid;gap:10px}
    .credit li{display:flex;gap:12px;align-items:baseline;border:1px solid var(--line);background:rgba(255,255,255,.02);border-radius:12px;padding:12px}
    .credit .role{width:16em;min-width:10em;letter-spacing:.18em;color:var(--ink)}

    /* Gallery */
    .hscroll{display:grid;gap:14px;grid-auto-flow:column;grid-auto-columns:minmax(72vw,460px);overflow-x:auto;padding-bottom:6px;scroll-snap-type:x mandatory}
    .hscroll>*{scroll-snap-align:start;border:1px solid var(--line);border-radius:14px;overflow:hidden;background:#0d0d14}

    /* Audio */
    .audio-wrap{display:grid;gap:16px}
    .audio-player{border:1px solid var(--line);background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border-radius:14px;padding:18px}
    .audio-player h3{margin:0 0 6px;letter-spacing:.18em}
    audio{width:100%}
    .cta{display:inline-grid;place-items:center;padding:10px 18px;border-radius:999px;border:1px solid rgba(255,255,255,.2);background:linear-gradient(180deg,rgba(229,9,20,.95),rgba(229,9,20,.75));font-weight:900;letter-spacing:.12em}

    /* Footer */
    footer{border-top:1px solid var(--line);padding:28px 0 60px;color:var(--ink);text-align:center;position:relative;z-index:2}
    .socials{display:flex;gap:16px;justify-content:center;margin:4px 0 12px}
    .socials a{display:inline-grid;place-items:center;width:48px;height:48px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--line)}
    .socials a:hover{background:rgba(255,255,255,.12)}
    .socials svg{width:22px;height:22px;fill:#fff}

    /* Reveal & Bullet Holes (共通) */
    .reveal{opacity:0;transform:translateY(18px);transition:opacity 700ms ease,transform 700ms ease}
    .reveal.is-in{opacity:1;transform:none}
    .bh{position:fixed;width:22px;height:22px;pointer-events:none;opacity:0;transform:scale(.4) rotate(0deg);
      background:
        radial-gradient(circle at 50% 50%, rgba(0,0,0,1) 20%, rgba(0,0,0,.9) 26%, rgba(120,120,120,.15) 40%, rgba(0,0,0,0) 60%),
        radial-gradient(circle at 60% 60%, rgba(255,0,0,.35), transparent 30%);
      border-radius:50%;filter:drop-shadow(0 2px 2px rgba(0,0,0,.6));
      box-shadow: inset 0 0 6px rgba(0,0,0,.9), 0 0 0 1px rgba(255,255,255,.05);
      z-index:40;animation:bh-in 420ms cubic-bezier(.2,.7,.2,1) forwards}
    .bh-smoke{position:fixed;width:120px;height:120px;pointer-events:none;background:radial-gradient(ellipse at 40% 60%, rgba(255,255,255,.08), transparent 60%);filter:blur(4px);opacity:0;transform:translate(-50%,-50%);z-index:39;animation:smoke 1200ms ease forwards}

    @media (prefers-reduced-motion:reduce){.intro__logo{animation:none;opacity:1;transform:none}.reveal{transition:none;opacity:1;transform:none}}

    /* ===== Hero（左右2カラム＋下段プロフィール） ===== */
    .hero-showcase{display:grid;grid-template-columns:minmax(280px,1.1fr) minmax(240px,1fr);
      grid-template-areas:"quote img" "meta img";align-items:center;gap:28px 40px;min-height:clamp(520px,80svh,860px)}
    .quote-area{grid-area:quote;align-self:end}
    #quote-text{font-size:clamp(28px,5.8vw,64px);line-height:1.18;letter-spacing:.08em;font-weight:800;text-shadow:0 0 14px rgba(229,9,20,.45)}
    .char-info{display:contents}
    .char-img{grid-area:img;justify-self:center;width:min(64vw,640px);max-height:min(78svh,760px);object-fit:cover;border:none;border-radius:16px;box-shadow:0 18px 60px rgba(0,0,0,.55)}
    .char-meta{grid-area:meta;align-self:start;max-width:58ch}
    .char-name{font-size:clamp(20px,2.6vw,30px);margin:4px 0 4px;font-weight:900}
    .char-cv{margin:0 0 10px;font-size:14px;color:var(--ink);letter-spacing:.06em}
    .char-desc{font-size:15px;line-height:1.8;color:#ddd}
    .site-header__inner.wrap{padding-top:60px;padding-bottom:40px}

    /* スマホでも左テキスト/右画像 */
    @media (max-width:768px){
      .hero-showcase{grid-template-columns:1fr 1fr;grid-template-areas:"quote img" "meta img";gap:12px 12px;min-height:72svh}
      #quote-text{font-size:clamp(18px,6.4vw,28px);line-height:1.24}
      .char-img{width:46vw;max-height:58svh;border-radius:14px;box-shadow:0 12px 36px rgba(0,0,0,.5)}
      .char-meta{max-width:unset}
    }

    /* Mobile nav fix */
    @media (max-width:768px){
      .gmenu{justify-content:flex-start;gap:10px;padding:10px 12px;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
      .gmenu::-webkit-scrollbar{display:none}
      .gmenu a{font-size:13px;letter-spacing:.08em;padding:8px 10px;white-space:nowrap;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
      .gmenu a:hover,.gmenu a:focus{background:rgba(255,255,255,.12)}
      .gmenu .brand{margin-right:0;position:sticky;left:0;z-index:1;background:rgba(255,255,255,.10)}
      html{scroll-padding-top:56px}
    }

    /* CAST grid center (PC/Tablet) */
    @media (min-width:768px){
      #cast .grid{grid-template-columns:repeat(auto-fit,minmax(220px,260px));justify-content:center}
      #cast .card{width:260px}
    }
      /* ===== CAST tabs & panels ===== */
.cast-tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}
.tab-btn {
  flex: 1;
  padding: 10px 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.05);
  color: #fff;
  font-weight: 700;
  letter-spacing: .08em;
  border-radius: 6px;
  cursor: pointer;
  transition: background .3s;
}
.tab-btn.active {
  background: var(--accent);
}
.cast-panels {
  position: relative;
}
.cast-panel {
  display: none;
  animation: fadeSlide .6s ease;
}
.cast-panel.active {
  display: block;
}
@keyframes fadeSlide {
  from { opacity: 0; transform: translateX(20px); }
  to   { opacity: 1; transform: translateX(0); }
}
      /* CAST cards smaller */
#cast .grid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  justify-content: center;
}
#cast .card {
  width: 180px;  /* ← 小さめに調整 */
  border: 1px solid var(--line);
  background: rgba(255,255,255,.02);
  border-radius: 12px;
  overflow: hidden;
}
#cast .card .ph {
  aspect-ratio: 3/4;   /* ← 縦長比率に変更（キャラ絵向け） */
  background: #0d0d14;
  display: grid;
  place-items: center;
}
#cast .card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
/* ロゴはヘッダーの中だけで中央配置。固定はしない */
.main-logo{
  position: absolute;
  top: 32%;                 /* ちょい上寄せ：中央=50% → 45% */
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(90vw, 840px);
  z-index: 100;             /* 最前面に固定 */
  pointer-events: none;
  filter: drop-shadow(0 10px 30px rgba(0,0,0,.6));
}
/* 火の粉を最前面 */
#fx-embers{
  position: fixed;
  inset: 0;
  z-index: 6;          /* ロゴより上 */
  pointer-events: none;
}
      /* ★ 名言を“少しだけ”上に持ち上げる（ヒーロー全体を上へ） */
.hero-showcase{
 margin-top: clamp(100px, 32vh, 230px); /* 数値を少し増やす */
}

/* ★ ロゴの占有を少しだけ軽くして、名言が上がりやすく */
.logo-spacer{
  height: clamp(240px, 46vh, 560px);
}

/* スマホはロゴ寄せ + 名言上げを少しマイルドに */
/* スマホはロゴ寄せ + 名言上げを少しマイルドに */
@media (max-width:768px){
  .main-logo{ top: 28%; width: min(90vw, 520px); }
  .hero-showcase{ margin-top: clamp(40px, 12vh, 120px); }
  .logo-spacer{ height: clamp(200px, 38vh, 480px); }
} /* ← ← ← ここでちゃんと閉じる！ */
/* ===== Typing Intro =====  ← ここからはメディアクエリの“外”にあることが重要 */
.type-line{
  font-size:clamp(28px, 7vw, 60px);  /* もっと大きく出す */
  font-weight: 900;
  letter-spacing: .08em;
  text-align: center;
  max-width: min(92vw, 1200px);
  margin: 0 24px;
  line-height: 1.3;
  text-shadow: 0 0 24px rgba(229,9,20,.55);
  opacity: 1;
  transition: opacity .5s ease;
}
.caret{
  display:inline-block;
  width:.6ch; height:1em; transform:translateY(.18em);
  background:currentColor; opacity:.85; margin-left:.1ch;
  animation:blink 1s step-end infinite;
}
@keyframes blink{ 50%{ opacity:.15 } }
.type-line.is-out{ opacity:0 }

/* モバイルだけ別サイズ */
@media (max-width:768px){
  /* ヒーローは縦並び：名言 → 画像 → プロフィール */
  .hero-showcase{
    grid-template-columns: 1fr;
    grid-template-areas:
      "quote"
      "img"
      "meta";
    gap: 14px;
    min-height: unset;
    margin-top: clamp(60px, 14vh, 120px); /* ここで“名言を少し下げる”も実現 */
  }

  /* 名言テキストを中央寄せ＆読みやすい行間に */
  #quote-text{
    font-size: clamp(20px, 7.2vw, 30px);
    line-height: 1.22;
    letter-spacing: .06em;
    text-align: center;
    text-shadow: 0 0 10px rgba(229,9,20,.35);
  }

  /* 画像は幅優先でセンター */
  .char-img{
    width: min(86vw, 520px);
    max-height: 52svh;
    border-radius: 14px;
    box-shadow: 0 12px 36px rgba(0,0,0,.5);
    justify-self: center;
  }

  /* プロフィールも中央寄せ・少し詰める */
  .char-meta{
    text-align: center;
    max-width: 64ch;
    justify-self: center;
  }
}

/* （任意）テキストは少しだけ遅延で気持ち良く */
#quote-text.swap-fade{ transition-duration: .42s; }
/* ===== Intro: single glass shatter ===== */
.intro__logo-wrap{ position:relative; overflow:visible; }
.glass {
  position:absolute; inset:-14px; border-radius:14px; pointer-events:none; z-index:12;
  /* うっすらガラス感（反射） */
  background:
    radial-gradient(120% 90% at 50% 40%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,0));
  box-shadow: inset 0 0 20px rgba(255,255,255,.06);
  opacity:.8;
}
.glass.is-cracked{
  /* 中央に穴（透過）を開ける */
  -webkit-mask: radial-gradient(circle at 50% 52%, transparent 0 24%, #000 26%);
          mask: radial-gradient(circle at 50% 52%, transparent 0 24%, #000 26%);
  animation: glassFlash .18s ease-out;
}
@keyframes glassFlash { from{ filter:brightness(1.6); } to{ filter:brightness(1); } }

/* ひびSVGを描画して“スッ”と伸びる */
.cracks{ position:absolute; inset:0; }
.cracks path{
  stroke: rgba(255,255,255,.9);
  stroke-width:1.2; stroke-linecap:round;
  stroke-dasharray: var(--len,100); stroke-dashoffset: var(--len,100);
  filter: drop-shadow(0 0 6px rgba(255,255,255,.35));
  animation: crackDraw .7s cubic-bezier(.2,.8,.2,1) forwards;
}
@keyframes crackDraw { to{ stroke-dashoffset:0; } }

/* 飛び散る破片 */
.shard{
  position:absolute; width:12px; height:24px; left:50%; top:50%;
  background: linear-gradient(#dfe4ea, rgba(255,255,255,0));
  border: 1px solid rgba(255,255,255,.25);
  border-bottom:none; opacity:1; transform-origin:6px 20px;
  clip-path: polygon(50% 0, 100% 70%, 50% 100%, 0 70%);
  animation: flyShards .9s ease-out forwards;
}
@keyframes flyShards {
  to { transform: translate(var(--tx,0), var(--ty,0)) rotate(var(--rot,0));
       opacity:0; filter:blur(1px); }
}
  </style>
</head>
<body>
<!-- Intro -->
<div id="intro" class="intro" aria-label="イントロ演出">
  <p id="type-line" class="type-line" aria-live="polite">
    <span id="type-text"></span><span class="caret" aria-hidden="true"></span>
  </p>
</div>
  <!-- GNav + Embers Canvas -->
  <nav class="gnav">
    <div class="wrap gmenu">
      <a href="#top" class="brand">WAVER 3</a>
      <a href="#news">NEWS</a>
      <a href="#story">STORY</a>
      <a href="#cast">CAST</a>
      <a href="#staff">STAFF</a>
      <a href="#gallery">GALLERY</a>
      <a href="#audio">WAVER2（音声）</a>
    </div>
  </nav>
  <canvas id="fx-embers" aria-hidden="true"></canvas>
<!-- BGM（ループ・事前読み込み・初期ミュート） -->
<audio id="bgm" preload="auto" loop muted>
  <source src="assets/bgm/theme.mp3" type="audio/mpeg">
  <source src="assets/bgm/theme.ogg" type="audio/ogg">
</audio>

<!-- サウンド切替ボタン（任意。UI欲しければ） -->
<button id="sound-toggle" aria-pressed="false" aria-label="サウンドON/OFF" style="
  position:fixed; right:16px; bottom:16px; z-index:60;
  border:1px solid rgba(255,255,255,.2); background:rgba(0,0,0,.5);
  color:#fff; padding:10px 12px; border-radius:999px; backdrop-filter:blur(6px);
  font-weight:700; letter-spacing:.06em; cursor:pointer;">SOUND: OFF</button>
<!-- Header -->
<header id="top" class="site-header" role="banner" aria-label="メインビジュアル">
  <div class="site-header__inner wrap">
      <img class="main-logo" src="assets/main-logo.png" alt="WAVER 3">
  <div class="logo-spacer" aria-hidden="true"></div>  <!-- ★ 追加 -->
    <div class="hero-showcase">
      <div class="quote-area">
        <p class="quote-text swap-fade" id="quote-text">―― 名言がここに流れます ――</p>
      </div>
      <div class="char-info" id="char-info">
        <img class="char-img swap-fade" src="assets/char-1.jpg" alt="キャラ1">
        <div class="char-meta">
          <h3 class="char-name">キャラ名1</h3>
          <p class="char-cv">CV. 演者名1</p>
          <p class="char-desc">キャラの設定詳細をここに記載します。性格や役割など。</p>
        </div>
      </div>
    </div>
  </div>
</header>

  <!-- STORY -->
  <section id="story">
    <div class="wrap">
      <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">STORY</h2></div>
      <div class="story">
        <figure class="kv reveal"><img src="assets/story.jpg" alt="ストーリーイメージ"></figure>
        <p class="lead reveal">都市の闇に蠢く“波動”は、すでに臨界を超えていた──。<br>伝説の作戦名〈WAVER〉が再起動する。生還率はゼロに等しい。それでも、選ぶのは“生か死”ではなく“進むか止まるか”。</p>
      </div>
    </div>
  </section>
    
    <section id="theme">
  <div class="wrap">
    <div class="sec__hd reveal"><span class="bar"></span><h2 class="sec__title">THEME SONG</h2></div>
    <p class="lead reveal">主題歌「スクランブル」 — SPYAIR   作詞：MOMIKEN 作曲：UZ。</p>
  </div>
</section>

<!-- CAST -->
<section id="cast">
  <div class="wrap">
    <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">CAST</h2></div>

    <!-- Tabs -->
    <div class="cast-tabs">
      <button class="tab-btn active" data-tab="fam">ChamaFamiglia</button>
      <button class="tab-btn" data-tab="unpub1">未公開</button>
      <button class="tab-btn" data-tab="unpub2">未公開</button>
    </div>

    <!-- Panels -->
    <div class="cast-panels">
      <!-- それぞれのパネルは空のグリッドだけ用意。中身はJSで所定人数ぶん自動生成します -->
      <div class="cast-panel active" id="fam">
        <div class="grid" id="fam-grid"></div>
      </div>

      <div class="cast-panel" id="unpub1">
        <div class="grid" id="unpub1-grid"></div>
      </div>

      <div class="cast-panel" id="unpub2">
        <div class="grid" id="unpub2-grid"></div>
      </div>
    </div>
  </div>
</section>

  <!-- STAFF -->
  <section id="staff">
    <div class="wrap">
      <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">STAFF</h2></div>
      <ul class="credit">
        <li class="reveal"><strong class="role">監督</strong><span>Chama</span></li>
        <li class="reveal"><strong class="role">監修</strong><span>Suzuki</span></li>
        <li class="reveal"><strong class="role">脚本</strong><span>Chama</span></li>
        <li class="reveal"><strong class="role">制作</strong><span>Suzuki</span></li>
        <li class="reveal"><strong class="role">キャラクターデザイン／総作画監督</strong><span>Chama</span></li>
      </ul>
    </div>
  </section>
     <!-- NEWS -->
  <section id="news">
    <div class="wrap">
      <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">NEWS</h2></div>
      <ul class="news">
        <li class="reveal"><time datetime="2025-09-01">2025.09.01</time><div>特設サイト公開。ティザービジュアルを解禁しました。</div></li>
        <li class="reveal"><time datetime="2025-09-05">2025.09.05</time><div>キービジュアル第2弾を公開予定。</div></li>
        <li class="reveal"><time datetime="2025-09-20">2025.09.20</time><div><a href="#audio">「WAVER2（音声版）」</a>の期間限定公開が決定。</div></li>
      </ul>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery">
    <div class="wrap">
      <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">GALLERY</h2></div>
      <div class="hscroll">
        <img class="reveal" src="assets/gal-1.jpg" alt="ギャラリー1" loading="lazy">
        <img class="reveal" src="assets/gal-2.jpg" alt="ギャラリー2" loading="lazy">
        <img class="reveal" src="assets/gal-3.jpg" alt="ギャラリー3" loading="lazy">
        <img class="reveal" src="assets/gal-4.jpg" alt="ギャラリー4" loading="lazy">
      </div>
    </div>
  </section>

  <!-- AUDIO -->
  <section id="audio">
    <div class="wrap">
      <div class="sec__hd reveal bh-target"><span class="bar"></span><h2 class="sec__title">WAVER2 はこちらから</h2></div>
      <div class="audio-wrap">
        <div class="audio-player reveal">
          <h3>WAVER2 サウンドエディション</h3>
          <audio controls preload="metadata">
            <source src="assets/waver2.mp3" type="audio/mpeg" />
            <source src="assets/waver2.ogg" type="audio/ogg" />
            お使いのブラウザは audio タグに対応していません。
          </audio>
        </div>
        <a class="cta reveal" href="assets/waver2.mp3" download>音声をダウンロード</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="wrap">
      <div class="socials">
        <a href="#" aria-label="X" title="X"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h4l5 7 5-7h4l-7.5 10L22 21h-4l-6-8-6 8H2l7.6-10L3 3z"/></svg></a>
        <a href="#" aria-label="Instagram" title="Instagram"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5zM18.75 5.25a1.25 1.25 0 1 1-1.25 1.25 1.25 1.25 0 0 1 1.25-1.25z"/></svg></a>
        <a href="#" aria-label="WAVE" title="WAVE"><svg viewBox="0 0 64 24" aria-hidden="true"><path d="M2 2h12l6 14 6-14h12l-7 20H42L32 8l-10 14H9z" fill="white"/></svg></a>
      </div>
      © 2025 WAVER PROJECT. All Rights Reserved.
    </div>
  </footer>
<!-- ===== Script 1: Intro（ロゴ フェードイン → フェードアウト + BGM） ===== -->
<script>
  const introEl  = document.getElementById('intro');
  const typeEl   = document.getElementById('type-text');
  const lineEl   = document.getElementById('type-line');
  let introDone  = false;

  // ===== BGMそのまま流用 =====
  let bgmStarted = false;
  function playBGM() {
    if (bgmStarted) return;
    const el = document.getElementById('bgm');
    if (!el) return;
    const fadeIn = () => {
      try { el.volume = 0; } catch {}
      el.muted = false;
      const step = () => {
        if (el.volume < 0.6) { el.volume = Math.min(0.6, el.volume + 0.05); requestAnimationFrame(step); }
      };
      requestAnimationFrame(step);
    };
    el.play().then(()=>{ bgmStarted = true; fadeIn();
      const btn = document.getElementById('sound-toggle');
      if (btn){ btn.textContent = 'SOUND: ON'; btn.setAttribute('aria-pressed','true'); }
    }).catch(()=>{ /* ブロック時は次の操作で再試行（既存と同様の簡略版） */
      const retry = () => el.play().then(()=>{ bgmStarted=true; fadeIn();
        const btn=document.getElementById('sound-toggle'); if(btn){btn.textContent='SOUND: ON';btn.setAttribute('aria-pressed','true');}
        ['click','touchstart','keydown'].forEach(ev=>window.removeEventListener(ev,retry));
      });
      ['click','touchstart','keydown'].forEach(ev=>window.addEventListener(ev,retry,{once:true,passive:true}));
    });
  }

  function hideIntroOnce(){
    if (introDone || !introEl) return;
    introDone = true;
    introEl.classList.add('is-hide');              // 既存のフェードアウト（CSSにあるやつ）
    setTimeout(()=> introEl.classList.add('is-gone'), 1200);
    playBGM();                                     // 退場と同時にBGM開始
  }

  // ===== タイピング演出 =====
  function typeText(target, text, speed = 70){
    return new Promise(resolve=>{
      target.textContent = '';
      let i = 0;
      const tick = () => {
        // 一度に1～2文字進めて日本語でもテンポよく
        const step = (text.charCodeAt(i) > 255) ? 1 : 1;
        target.textContent += text.slice(i, i + step);
        i += step;
        if (i < text.length) setTimeout(tick, speed);
        else resolve();
      };
      tick();
    });
  }

  async function startIntro(){
    // 低速環境：一気に表示してすぐ退場
    const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (reduce){
      typeEl.textContent = 'Are you Ready?';
      setTimeout(hideIntroOnce, 900);
      return;
    }

    // 1) 「これが最後の戦いだ─」
    await typeText(typeEl, 'これが最後の戦いだ─', 72);
    await new Promise(r=>setTimeout(r, 1500));

    // ふっと消す
    lineEl.classList.add('is-out');
    await new Promise(r=>setTimeout(r, 280));
    lineEl.classList.remove('is-out');
    typeEl.textContent = '';

    // 2) 「Are you Ready？」
    await typeText(typeEl, 'Are you Ready？', 65);
    await new Promise(r=>setTimeout(r, 2000));

    // 全体フェードアウト
    hideIntroOnce();
  }

  // 起動タイミング
  window.addEventListener('load', startIntro);
  // いつものスキップ操作（クリックやキー入力で即退場）
  ['click','wheel','touchstart','keydown'].forEach(ev =>
    window.addEventListener(ev, hideIntroOnce, {passive:true})
  );
  // 万一のフォールバック
  setTimeout(hideIntroOnce, 8000);
</script>

<!-- ===== Script 2: 演出・名言ローテ・サウンドボタン ===== -->
<script>
  // Reveal on scroll + bullet holes trigger
  const io = new IntersectionObserver((ents)=>{
    ents.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('is-in');
        io.unobserve(e.target);
      }
    });
  },{threshold:.08});
  document.querySelectorAll('.reveal,.bh-target').forEach(el=>io.observe(el));

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const id=a.getAttribute('href');
      if(id.length>1){ e.preventDefault(); document.querySelector(id)?.scrollIntoView({behavior:'smooth'}); }
    });
  });

  // Light parallax header
  const header=document.querySelector('.site-header');
  window.addEventListener('scroll', ()=>{
    const y=Math.min(1,scrollY/innerHeight);
    header.style.transform=`translateY(${y*12}px)`;
    header.style.filter=`saturate(${1-y*0.2})`;
  },{passive:true});

  // Bullet holes generator (共通)
  function sprinkleHoles(target, opts){
    const rect = target.getBoundingClientRect();
    const baseX = rect.left + rect.width/2 + window.scrollX;
    const baseY = rect.top + rect.height/2 + window.scrollY;
    const isImg = target.tagName === 'IMG';
    const count = (typeof opts === 'number') ? opts : (opts && typeof opts.count === 'number') ? opts.count : (isImg ? 12 : 4);
    const radiusFactor = (opts && typeof opts.radius === 'number') ? opts.radius : (isImg ? 0.42 : 0.35);
    const makeSmoke = (opts && opts.smoke === false) ? false : true;
    for(let i=0;i<count;i++){
      const ang=(Math.random()*Math.PI*2);
      const r=Math.random()*rect.width*radiusFactor;
      const x= baseX + Math.cos(ang)*r;
      const y= baseY + Math.sin(ang)*Math.max(10,rect.height*0.55);
      const hole=document.createElement('div');
      hole.className='bh';
      hole.style.left=(x-11)+'px';
      hole.style.top=(y-11)+'px';
      hole.style.setProperty('--rot',(Math.random()*60-30)+'deg');
      document.body.appendChild(hole);
      if(makeSmoke){
        const smoke=document.createElement('div');
        smoke.className='bh-smoke'; smoke.style.left=x+'px'; smoke.style.top=y+'px'; document.body.appendChild(smoke);
        setTimeout(()=> smoke.remove(), 1400);
      }
    }
  }

  // Embers FX
  (function(){
    const c = document.getElementById('fx-embers');
    if(!c) return; const dpr = Math.min(2, window.devicePixelRatio||1);
    const ctx = c.getContext('2d'); let W, H, parts=[]; const MAX=90;
    function resize(){ W = c.width = innerWidth * dpr; H = c.height = innerHeight * dpr; c.style.width = innerWidth+'px'; c.style.height = innerHeight+'px'; }
    function spawn(){ if(parts.length>MAX) return; parts.push({ x: Math.random()*W, y: H + Math.random()*H*.2, vx:(Math.random()-.5)*.08*dpr, vy: -(1+Math.random()*1.5)*dpr, life: 80+Math.random()*120, r: 1.2*dpr+Math.random()*1.6*dpr }); }
    function tick(){ ctx.clearRect(0,0,W,H);
      const g = ctx.createRadialGradient(W*.5,H*.45,0,W*.5,H*.45,Math.max(W,H)*.7);
      g.addColorStop(0,'rgba(255,255,255,0.01)'); g.addColorStop(1,'rgba(0,0,0,0.0)');
      ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
      for(let i=0;i<3;i++) spawn();
      for(let i=parts.length-1;i>=0;i--){ const p=parts[i]; p.x+=p.vx; p.y+=p.vy; p.life--; const f=Math.max(0,Math.min(1,p.life/140));
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=`rgba(255,120,20,${0.25*f})`; ctx.fill();
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r*.5,0,Math.PI*2); ctx.fillStyle=`rgba(255,200,120,${0.35*f})`; ctx.fill();
        if(p.life<=0||p.y<-20*dpr) parts.splice(i,1);
      }
      requestAnimationFrame(tick);
    }
    resize(); tick(); window.addEventListener('resize', resize);
  })();

  // ===== Character Quotes Rotator =====
// ===== Character Quotes Rotator =====
const quotes = [
  {quote:"この物語の主人公は俺らだからよ─", img:"assets/char-1.jpg", name:"ちゃま", cv:"chama", desc:"熱しやすく冷めやすい。背中で語る姿はまさにKING"},
  {quote:"皆となら負ける気はしません─", img:"assets/char-2.jpg", name:"珠来", cv:"Suzuki", desc:"随一の忠誠心。冷静で分析上手なまとめ役"},
  {quote:"上等。全員消しといてやるよ─", img:"assets/char-3.jpg", name:"るみみん", cv:"neki", desc:"すぐキレるが仲間思い。最強のリードオフマン"},
  // …（重複は残しても動作OK。後で整えるならここを調整）
];

let qIndex = 0;

function showQuote(i){
  const q = quotes[i];
  const qt = document.getElementById('quote-text');
  const imgEl = document.querySelector('#char-info .char-img');
  const nameEl = document.querySelector('#char-info .char-name');
  const cvEl = document.querySelector('#char-info .char-cv');
  const descEl = document.querySelector('#char-info .char-desc');

  qt.classList.add('swap-hide');
  imgEl.classList.add('swap-hide');

  const pre = new Image();
  pre.onload = apply; pre.onerror = apply; pre.src = q.img;

  function apply(){
    setTimeout(()=>{
      qt.textContent = q.quote;
      nameEl.textContent = q.name;
      cvEl.textContent = 'CV.' + q.cv;
      descEl.textContent = q.desc;
      if(imgEl.src !== q.img) imgEl.src = q.img;
      requestAnimationFrame(()=>{
        qt.classList.remove('swap-hide');
        imgEl.classList.remove('swap-hide');
      });
    }, 180);
  }
}

function rotateQuotes(){
  showQuote(qIndex);

  // デフォルト 6秒（=従来より+1秒）
  let delay = 6000;

  // ちゃま（index=0）だけ +3秒 → 9秒
  if (qIndex === 0) delay = 15000;

  qIndex = (qIndex + 1) % quotes.length;
  setTimeout(rotateQuotes, delay);
}

// ★ 最後に起動
rotateQuotes();
  // ===== Sound toggle button =====
  (function(){
    const btn = document.getElementById('sound-toggle');
    const el  = document.getElementById('bgm');
    if(!btn || !el) return;

    btn.addEventListener('click', () => {
      if (el.paused) {
        el.muted = false;
        el.play().then(()=>{
          btn.textContent = 'SOUND: ON';
          btn.setAttribute('aria-pressed','true');
        }).catch(()=>{/* ブロック時は次のユーザー操作で再試行 */});
      } else {
        el.pause();
        btn.textContent = 'SOUND: OFF';
        btn.setAttribute('aria-pressed','false');
      }
    });
  })();
    </script> 
    <!-- ===== Script 2: 演出・名言ローテ・サウンドボタン ===== -->
<script>
  // ここに既存の Reveal / Smooth scroll / Quotes rotator などがある

  // ===== Sound toggle button =====
    // ===== CAST カード自動生成 =====
// 実カード（画像・名前）があるぶんはここに列挙。残りは Coming Soon で埋めます。
const famData = [
  { img: 'assets/cast-1.jpg', name: 'キャラ1', meta: 'ChamaFamiglia' },
  // 以降、実データが揃い次第ここに追記
];
const unpub1Data = []; // 後で差し替え
const unpub2Data = []; // 後で差し替え

function makeCard({img, name, meta}) {
  const article = document.createElement('article');
  article.className = 'card';
  article.innerHTML = `
    <div class="ph"><img src="${img}" alt="${name || 'Coming Soon'}"></div>
    <div class="bd"><strong>${name || 'Coming Soon'}</strong><div class="meta">${meta || ''}</div></div>
  `;
  return article;
}

function fillGrid(gridId, data, targetCount, metaLabel) {
  const grid = document.getElementById(gridId);
  if (!grid) return;
  grid.innerHTML = '';
  data.slice(0, targetCount).forEach(item => grid.appendChild(makeCard(item)));
  for (let i = data.length; i < targetCount; i++) {
    grid.appendChild(makeCard({
      img: 'assets/comingsoon.jpg',
      name: 'Coming Soon',
      meta: metaLabel
    }));
  }
}

// 所定人数で埋める
fillGrid('fam-grid',   famData,   12, 'ChamaFamiglia');
fillGrid('unpub1-grid',unpub1Data, 8, '未公開');
fillGrid('unpub2-grid',unpub2Data,10, '未公開');

document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const tab = btn.dataset.tab;
    document.querySelectorAll('.cast-panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
  });
});
</script>
</body>
</html>
